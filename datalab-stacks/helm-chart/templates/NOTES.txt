{{/*- Check if there is a secret already deployed (e.g. user used helm install --wait) */}}
{{- $secret := (lookup "v1" "Secret" .Release.Namespace (include "datasciencelab.fullname" .)) }}
{{- if eq .Release.Namespace "default" }}

!! BE AWARE THAT IT IS NOT RECOMMENDED TO INSTALL THIS CHART INTO THE DEFAULT NAMESPACE. To remove the Helm chart again immediately:

    helm uninstall {{ include "datasciencelab.name" . }}

{{ end }}
{{- if $secret }}
Use the following URL to access your Jupyter notebook:

  http://localhost/{{ include "datasciencelab.name" . }}?token={{ index $secret.data "jupyterToken" | b64dec }}

{{- else}}
Kubernetes secret for Jupyter token has not been fully deployed yet. To get the appropriate URL, try again:
    
    helm upgrade --install --namespace {{ .Release.Namespace }} --create-namespace --wait {{ include "datasciencelab.name" . }} .

{{- end}}
